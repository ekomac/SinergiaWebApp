{% extends 'base_system.html' %}

{% block modal_content %}
{% include 'envios/envio/snippets/excel-helper-modal.html' %}
{% endblock modal_content %}


{% block content %}

<style>
    td {
        vertical-align: middle;
    }

    .hola {
        background-color: red;
    }

    div .hidden {
        display: none;
    }
</style>
<div class="col-md-12 col-xl-7 d-flex-block">
    <form method='POST' id="create_form" class="card flex-fill shadow-lg bg-white" name="create_form" target="_top"
        enctype="multipart/form-data">{% csrf_token %}

        <div class="card-header d-flex justify-content-between align-items-center">
            <div>
                Crear objeto
            </div>
            <div>
                <a href="{{ request.META.HTTP_REFERER }}"><i class="bi bi-arrow-left-short"></i>Volver</a>
            </div>
        </div>

        <div class="card-body">
            <h3 class="card-title text-center mt-3">CARGA MASIVA DE ENVÍOS</h3>

            <div class="row mt-3">
                <div class="col">
                    <button type="button" class="btn btn-secondary" data-bs-toggle="modal"
                        data-bs-target="#baseModal">Ayuda sobre el excel</button>
                </div>
            </div>

            <div class="row mt-3 mb-4">
                <div class="col-12 col-md-6">
                    <label for="file" class="form-label">Default file input example</label>
                    <input class="form-control {% if upload_form.file.errors %}is-invalid{% endif %}" type="file"
                        id="id_file" name="file" required>
                    <div class="invalid-feedback">
                        {% for error in upload_form.file.errors %}{{error}}<br>{% endfor %}
                    </div>
                </div>
                <div class="col-12 col-md-6">
                    <label for="id_client" class="form-label">Cliente</label>
                    {{upload_form.client}}
                    <div class="invalid-feedback">
                        {% for error in upload_form.client.errors %}{{error}}<br>{% endfor %}
                    </div>
                </div>
            </div>

            <!-- START SUMBIT BUTTON -->
            <div class="row mt-3">
                <div class="d-grid gap-2 d-md-flex">
                    <button type="submit" class="btn btn-primary"><i class="bi bi-stars">&nbsp;Cargar envíos</i>
                    </button>
                </div>
            </div>
            <!-- END SUMBIT BUTTON -->
            {% if upload_form.non_field_errors %}
            <div class="alert alert-danger mt-3 mb-3" role="alert">
                Ups! Algo salió mal. Se encontraron los siguientes errores:<br>
                <ul>
                    {% for error in upload_form.non_field_errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                Preparamos <a href="{% url 'envios:envio-bad-bulk-add' %}">este archivo</a> para vos. Por favor, corregí
                el archivo e intentalo nuevamente.
            </div>
            {% endif %}

        </div>
    </form>

</div>

{% endblock content %}